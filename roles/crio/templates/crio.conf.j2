[crio]
  log_dir = "/var/log/crio/pods"
  root = "{{ crio.datadir | default('/var/lib/containers/storage') }}"
  runroot = "/var/run/containers/storage"
  storage_driver = "overlay"
  storage_option = ["overlay.mountopt=nodev,metacopy=on"]
  version_file = "/var/run/crio/version"
  version_file_persist = "/var/lib/crio/version"

  [crio.api]
    grpc_max_recv_msg_size = 16777216
    grpc_max_send_msg_size = 16777216
    listen = "/var/run/crio/crio.sock"
    stream_address = "127.0.0.1"
    stream_enable_tls = false
    stream_port = "0"
    stream_tls_ca = ""
    stream_tls_cert = ""
    stream_tls_key = ""

  [crio.image]
    big_files_temporary_dir = ""
    default_transport = "docker://"
    global_auth_file = ""
    image_volumes = "mkdir"
    pause_command = "/pause"
    pause_image = "{{ REGISTRY_URL | default('https://registry.aliyuncs.com') | urlsplit('hostname') }}{% if REGISTRY_URL | default('https://registry.aliyuncs.com') | urlsplit('port') is not none %}:{{REGISTRY_URL | default('https://registry.aliyuncs.com') | urlsplit('port')}}{% endif %}{% if REGISTRY_URL | default('https://registry.aliyuncs.com') | urlsplit('path') is not none %}{{ REGISTRY_URL | default('https://registry.aliyuncs.com') | urlsplit('path') }}{% endif %}/google_containers/pause:{{ KUBE_VERSION | component_version | community.general.json_query('plugin.pause') }}"
    pause_image_auth_file = ""
    signature_policy = ""

  [crio.metrics]
    enable_metrics = true
    metrics_port = 9090
    metrics_socket = ""

  [crio.network]
    network_dir = "/etc/cni/net.d/"
    plugin_dirs = ["/opt/cni/bin/"]

  [crio.runtime]
    additional_devices = []
    apparmor_profile = "crio-default"
    bind_mount_prefix = ""
    cgroup_manager = "systemd"
    conmon = ""
    conmon_cgroup = "podruntime.slice"
    conmon_env = ["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "TERM=xterm"]
    container_attach_socket_dir = "/var/run/crio"
    container_exits_dir = "/var/run/crio/exits"
    ctr_stop_timeout = 30
    decryption_keys_path = "/etc/crio/keys/"
    default_capabilities = ["CHOWN", "DAC_OVERRIDE", "FSETID", "FOWNER", "SETGID", "SETUID", "SETPCAP", "NET_BIND_SERVICE", "KILL"]
    default_env = []
    default_runtime = "runc"
    default_sysctls = []
    drop_infra_ctr = false
    gid_mappings = ""
    hooks_dir = ["/usr/share/containers/oci/hooks.d"]
    log_filter = ""
    log_level = "info"
    log_size_max = -1
    log_to_journald = false
    manage_ns_lifecycle = true
    namespaces_dir = "/var/run"
    no_pivot = false
    pids_limit = 1024
    pinns_path = "/usr/local/bin/pinns"
    read_only = false
    seccomp_profile = ""
    seccomp_use_default_when_empty = false
    selinux = false
    separate_pull_cgroup = ""
    uid_mappings = ""

    [crio.runtime.runtimes]
      [crio.runtime.runtimes.runc]
        runtime_path = "/usr/local/bin/runc"
        runtime_root = "/run/runc"
        runtime_type = "oci"

{% if gpu | default(false) %}
      [crio.runtime.runtimes.nvidia]
        runtime_path = "/usr/bin/nvidia-container-runtime"
        runtime_root = "/run/runc"
        runtime_type = "oci"
{% endif %}

